
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Flashing the Attenuator - GPStar Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flashing-the-attenuator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GPStar Documentation" class="md-header__button md-logo" aria-label="GPStar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GPStar Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flashing the Attenuator
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GPStar Documentation" class="md-nav__button md-logo" aria-label="GPStar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GPStar Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ABOUT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#important-partition-upgrades-v5x-v6x" class="md-nav__link">
    <span class="md-ellipsis">
      Important Partition Upgrades: V5.x &rarr; V6.x
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esp32-first-time-upload-via-usb" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32: First-Time Upload (via USB)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esp32-standard-updates-via-wifi" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32: Standard Updates (via WiFi)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi-security" class="md-nav__link">
    <span class="md-ellipsis">
      WiFi Security
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WiFi Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-a-wifi-password" class="md-nav__link">
    <span class="md-ellipsis">
      Setting a WiFi Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forgot-your-wifi-password" class="md-nav__link">
    <span class="md-ellipsis">
      Forgot Your WiFi Password?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usb-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      USB Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-development-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Software Development Requirements
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="flashing-the-attenuator">Flashing the Attenuator</h1>
<p>NOTICE - As of the V6.0 release all support for the Arduino Nano hardware has been deprecated as we can no longer build the necessary binaries for the limited memory space on that device. Going forward, only the ESP32 will be supported for the Attenuator device, whether purchased as a kit from Frutto Technologies or as a DIY solution.</p>
<p>The ESP32 microcontroller is capable of supporting Over-The-Air (OTA) updates for firmware, meaning you will need to utilize a desktop web browser from a computer (not a mobile device or tablet) and the built-in WiFi access point provided by the controller (prefix: "ProtonPack_"). <strong>However, please note the following special conditions!</strong></p>
<ol>
<li>If you used an off-the-shelf ESP32 device, then the software which enables the WiFi access point is <strong>not yet loaded</strong> so you will need to follow the "First-Time Upload" for the initial upload of firmware to your device.</li>
<li>If you are performing your first upgrade to the version v6.x firmware, you will need to perform the exact same process as the "First-Time Upload" to re-partition your device to accept the larger firmware files.</li>
</ol>
<h3 id="important-partition-upgrades-v5x-v6x">Important Partition Upgrades: V5.x &rarr; V6.x</h3>
<p>&#128721; <strong>STOP, PLEASE READ!</strong></p>
<p><strong>The partition scheme for the ESP32-based controllers has changed as of v6.0.0 to support a larger firmware file. This requires an update via USB cable for any users who were previously on a firmware release in v5.x or earlier.</strong> You will need to follow the "First-Time Upload" process to use a new, custom partition scheme on the device which provides a larger storage areas for Over-the-Air (OTA) updates. The standard flash memory of the ESP-WROOM-32 modules we use is limited to 4MB and must provide space to upload new firmware. For context, the default partition prioritized a "SPIFFS" area which was intended for file storage but is not used for our purposes. By removing that storage area we can allocate more space for larger firmware images (app0/app1), and adds an additional area for non-volatile storage (NVS).</p>
<p><strong>Old Scheme:</strong></p>
<ul>
<li>nvs: 20kb</li>
<li>otadata: 8kb</li>
<li>app0: 1280kb (ota_0)</li>
<li>app1: 1280kb (ota_1)</li>
<li>spiffs: 1408kb</li>
<li>coredump: 64kb</li>
</ul>
<p><strong>New Scheme:</strong></p>
<ul>
<li>nvs: 20kb</li>
<li>otadata: 8kb</li>
<li>app0: 1920kb (ota_0)</li>
<li>app1: 1920kb (ota_1)</li>
<li>nvs2: 128kb</li>
<li>coredump: 64kb</li>
</ul>
<p>Once you have updated to a firmware from v6.x or later using the USB process, then then you may proceed to using the instructions for over-the-air (OTA/WiFi) updates <strong>without</strong> a USB cable as described in the <strong>"Standard Updates"</strong> section.</p>
<p>For a more visual representation, please refer to this flowchart:
<img alt="" src="../images/ESP32UpgradePath.jpg" /></p>
<h3 id="esp32-first-time-upload-via-usb">ESP32: First-Time Upload (via USB)</h3>
<p>The following steps MUST be taken if either of these situations applies to you:</p>
<ul>
<li>If you are using your own ESP32 controller direct from Amazon or another supplier, then the microcontroller has not been flashed with the GPStar firmware to enable the OTA upload feature and the manual flashing process is required.</li>
<li>Or, if you are performing the first firmware update since the introduction of v6.x you will need to perform the manual flashing process. We need to make room for larger firmware files and this can only be done by repartitioning the device's internal 4MB storage area.</li>
</ul>
<p>If you encounter any issues while attempting to access your ESP32 device via a USB cable, please see the <strong>"<a href="#usb-troubleshooting">USB Troubleshooting</a>"</strong> section at the bottom of this guide.</p>
<p><strong>Option 1: Using GPStar ESP32 Firmware Uploader</strong></p>
<p>This uses a purpose-built flash tool just like the tools for the Proton Pack, Neutrona Wand, Single-Shot Blaster and GPStar Audio. Thanks to its ease of use, this is our recommended method for performing the first-time USB upload process. First, download either the Windows or Mac OSX flash tool from the <a href="extras/">extras</a> folder. If you are on Windows x86 or Linux, try Option 2 below instead.</p>
<p><strong>Windows (x64 only):</strong> <a href="extras/gpstarESP32FirmwareFlasher.exe?raw=1">GPStar ESP32 Firmware Flasher</a></p>
<p><strong>MacOS Intel/M1:</strong> <a href="extras/GPStar-ESP32-Flasher.dmg?raw=1">GPStar ESP32 Firmware Flasher (Mac OSX)</a></p>
<ol>
<li>Plug your device into a USB port on your computer.</li>
<li>
<p>Locate the following files from the <code>/binaries/attenuator</code> directory.</p>
<ul>
<li><a href="binaries/attenuator/extras/Attenuator-ESP32-Bootloader.bin?raw=1">extras/Attenuator-ESP32-Bootloader.bin</a> = This is the standard bootloader for the ESP32 itself.</li>
<li><a href="binaries/attenuator/extras/Attenuator-ESP32-Partitions.bin?raw=1">extras/Attenuator-ESP32-Partitions.bin</a> = This specifies the partition scheme for the flash memory.</li>
<li><a href="binaries/attenuator/extras/boot_app0.bin?raw=1">extras/boot_app0.bin</a> = This is the software for selecting the available/next OTA partition.</li>
<li><a href="binaries/attenuator/Attenuator-ESP32.bin?raw=1">Attenuator-ESP32.bin</a> = This is the custom firmware for the GPStar kit.</li>
</ul>
</li>
<li>
<p>Open the GPStar ESP32 Firmware Flasher and browse to the files specified in step 2 above for each of the four requested file locations (see below screenshot).</p>
</li>
</ol>
<p><img alt="" src="../images/ESP32-gpstar-flash.jpg" /></p>
<ol>
<li>
<p>The program should automatically detect the correct COM port and baud rate (see above screenshot). If it did not, use the drop-down menus to select the correct one for your PC.</p>
</li>
<li>
<p>Click the Upload button to flash the new firmware to your ESP32. Be patient, this process can take between 15 seconds and several minutes depending on the selected baud rate.</p>
</li>
<li>
<p>Once the flash has completed successfully, your ESP32 should now be broadcasting a WiFi network and you should be ready to install it into your Proton Pack. If the flash failed, please see Solution 2 in the <strong>"<a href="#usb-troubleshooting">USB Troubleshooting</a>"</strong> section at the bottom of this guide to manually switch the ESP32 into bootloader mode. You may also try lowering the baud rate to 115200 (if available), though note this will increase the time it takes to flash the firmware.</p>
</li>
</ol>
<p><strong>Option 2: Via Web Uploader</strong></p>
<p>This uses a 3rd-party website to upload using the Web Serial protocol which is only available on the Google Chrome, Microsoft Edge, and Opera desktop web browsers. Mobile browsers are NOT supported, and you will be prompted with a message if your web browser is not valid for use.</p>
<ol>
<li>
<p>Plug your device into a USB port on your computer and go to <a href="http://espwebtool.ghostbusters.engineering">http://espwebtool.ghostbusters.engineering</a> (which <a href="https://esp.huhn.me">redirects to https://esp.huhn.me</a>).</p>
</li>
<li>
<p>Locate the following files from the <code>/binaries/attenuator</code> directory.</p>
<ul>
<li><a href="binaries/attenuator/extras/Attenuator-ESP32-Bootloader.bin?raw=1">extras/Attenuator-ESP32-Bootloader.bin</a> = This is the standard bootloader for the ESP32 itself.</li>
<li><a href="binaries/attenuator/extras/Attenuator-ESP32-Partitions.bin?raw=1">extras/Attenuator-ESP32-Partitions.bin</a> = This specifies the partition scheme for the flash memory.</li>
<li><a href="binaries/attenuator/extras/boot_app0.bin?raw=1">extras/boot_app0.bin</a> = This is the software for selecting the available/next OTA partition.</li>
<li><a href="binaries/attenuator/Attenuator-ESP32.bin?raw=1">Attenuator-ESP32.bin</a> = This is the custom firmware for the GPStar kit.</li>
</ul>
</li>
<li>
<p>Click on the <strong>CONNECT</strong> button and select your USB serial device from the list of options and click on "Connect".</p>
</li>
<li>
<p>Once connected, select the files (noted above) for the following address spaces:</p>
<ul>
<li>0x1000 &rarr; <a href="binaries/attenuator/extras/Attenuator-ESP32-Bootloader.bin?raw=1">Attenuator-ESP32-Bootloader.bin</a></li>
<li>0x8000 &rarr; <a href="binaries/attenuator/extras/Attenuator-ESP32-Partitions.bin?raw=1">Attenuator-ESP32-Partitions.bin</a></li>
<li>0xE000 &rarr; <a href="binaries/attenuator/extras/boot_app0.bin?raw=1">boot_app0.bin</a></li>
<li>0x10000 &rarr; <a href="binaries/attenuator/Attenuator-ESP32.bin?raw=1">Attenuator-ESP32.bin</a></li>
</ul>
</li>
<li>
<p>Click on the <strong>PROGRAM</strong> button to begin flashing. View the "Output" window to view progress of the flashing operation.</p>
</li>
<li>
<p>Once the device has completely flashed (100%) unplug the USB cable and remove any remaining power source from the device. Restore power to reboot the device and confirm operation.</p>
</li>
</ol>
<p>View <a href="../images/ESP_Firmware_Update.mp4">a quick video</a> of what this process should look like. Your list of USB devices may differ, and it may require selecting a different device if you cannot immediately determine which connected device is your ESP32.</p>
<p>📝 <strong>NOTE:</strong> If your device still cannot be found automatically you may need to view the <strong>"<a href="#usb-troubleshooting">USB Troubleshooting</a>"</strong> section at the bottom of this guide.</p>
<p><strong>Option 3: Via Command-Line</strong></p>
<p>You will need to utilize a command-line tool to upload the firmware to your device from your local computer. Note this is <em>not recommended</em> unless you are using a platform other than Windows x64 or Mac OSX, such as Linux.</p>
<ol>
<li>
<p>Install the latest Python 3.x utility based on your operating system:</p>
<ul>
<li>Windows: Download the installer from <a href="https://www.python.org/downloads/windows/">Python</a>. When installing you may be prompted to "Add Python to PATH", and it is recommended to accept that option.</li>
<li>Linux: Execute <code>sudo apt update &amp;&amp; sudo apt install -y python3 python3-pip</code></li>
<li>MacOS: Execute <code>brew install python</code> using Homebrew (<a href="https://brew.sh/">instructions here</a>)</li>
</ul>
</li>
<li>
<p>From a terminal (command line) prompt run the following which will install the <code>pip</code> tool along with the <code>esptool</code> utility:</p>
<p><code>python3 -m ensurepip
python3 -m pip install --upgrade pip setuptools esptool</code></p>
</li>
<li>
<p>Confirm that python was installed successfully by running the commands <code>python --version</code> and <code>python3 --version</code>. Use the command that reports a 3.x version (<code>python</code> or <code>python3</code>) for all following steps. We will assume <code>python3</code> is available.</p>
</li>
<li>
<p>Navigate to the <code>binaries/attenuator</code> directory within the extracted GPStar-proton-pack software release:</p>
<p><code>cd &lt;extracted_location&gt;/binaries/attenuator</code></p>
</li>
<li>
<p>Ensure your ESP32 is plugged into your computer using a data-capable USB cable. Run the following command to detect and display information about your ESP32, including the serial port used for communication:</p>
<p><code>python3 -m esptool flash_id</code></p>
<ul>
<li>If this lists multiple devices, unplug the device and run the command; then replug the device and run the command again.</li>
<li>Look for differences in the results to identify which USB device belongs to your ESP32.</li>
<li>For <strong>Linux/MacOS</strong> the port name may begin with <code>/dev/cu.usbserial</code> or <code>/dev/cu.wchusbserial</code> and <strong>is</strong> case-sensitive when used.</li>
<li>For <strong>Windows</strong> it would be <code>COM[0-9]</code> (eg. <code>COM4</code> or <code>COM12</code>) and <strong>is not</strong> case-sensitive.</li>
</ul>
</li>
<li>
<p>Run the following command to flash the bootloader and firmware, providing the correct <code>&lt;PORT&gt;</code> value discovered from the previous step:</p>
<p><code>python3 -m esptool --port &lt;PORT&gt; --chip esp32 --baud 921600 write_flash --flash_mode dio --flash_size detect --flash_freq 40m 0x1000 extras/Attenuator-ESP32-Bootloader.bin 0x8000 extras/Attenuator-ESP32-Partitions.bin 0xe000 extras/boot_app0.bin 0x10000 Attenuator-ESP32.bin</code></p>
</li>
</ol>
<p>📝 <strong>NOTE:</strong> If your device still cannot be found automatically you may need to view the <strong>"<a href="#usb-troubleshooting">USB Troubleshooting</a>"</strong> section at the bottom of this guide.</p>
<h3 id="esp32-standard-updates-via-wifi">ESP32: Standard Updates (via WiFi)</h3>
<p>This applies to all updates you will perform AFTER the first-time upload of the firmware for the device, when the private WiFi network for the Proton Pack is available via the custom firmware.</p>
<ol>
<li>Power up your Proton Pack and ESP32 device (whether standalone or as part of the Attenuator hardware).</li>
<li>Open the WiFi preferences on your computer/device and look for the SSID which begins <strong>"ProtonPack_"</strong>.<ul>
<li>If this is your first connection to this access point, use the default password <strong>"555-2368"</strong>.</li>
</ul>
</li>
<li>Navigate directly to the URL: <a href="http://192.168.1.2/update">http://192.168.1.2/update</a></li>
<li>Use the "Select File" button and select the <a href="binaries/attenuator/Attenuator-ESP32.bin?raw=1">Attenuator-ESP32.bin</a> file from the <code>/binaries/attenuator</code> directory.</li>
<li>The upload will begin immediately. Once at 100% the device will reboot.</li>
<li>Navigate to <a href="http://192.168.1.2">http://192.168.1.2</a> or <code>http://protonpack_####.local</code> to confirm that the device is able to communicate with the Proton Pack PCB.</li>
</ol>
<p><img alt="" src="../images/WebUI-Update1.jpg" /></p>
<p><img alt="" src="../images/WebUI-Update2.jpg" /></p>
<p><img alt="" src="../images/WebUI-Update3.jpg" /></p>
<p><strong>Note:</strong> If the upload fails, this is not uncommon. Simply attempt the upload again using the OTA updater.</p>
<h2 id="wifi-security">WiFi Security</h2>
<p>While every device gets a unique SSID for the wireless network, the password is always the same default of "555-2368". Therefore, to keep your device private and out of reach of others you are <strong>strongly</strong> encouraged to change this password.</p>
<h3 id="setting-a-wifi-password">Setting a WiFi Password</h3>
<p>Since this device will make use of a private WiFi network with a default password, it is STRONGLY encouraged that you take a moment to change the password to something you prefer to avoid unauthorized access of your equipment.</p>
<p>Once you are able to reach the web UI at <a href="http://192.168.1.2">http://192.168.1.2</a> or <code>http://protonpack_####.local</code> scroll to the bottom of the page to find the "Secure Device WiFi" link. Follow the instructions on the page to set a new password for your device. This will be unique to the ESP32 controller and will persist as the new default even if the device is power-cycled. Passwords must only be at least 8 characters and you will be required to enter a matching password as confirmation to ensure you entered the expected string of characters.</p>
<p>The password you choose will be stored in an area of the device's flash memory that is unaffected by future firmware updates. Therefore, if you forget your password you may need to load a special version of the firmware which can bypass that stored value and allow you to use the default password again. This process is covered in the next section.</p>
<h3 id="forgot-your-wifi-password">Forgot Your WiFi Password?</h3>
<p><img alt="" src="../images/WebUI-Password.jpg" /></p>
<p>The following is only applicable to users on firmware PRIOR to the v5.2.2 release. As of that release the ability to boot up with the default password was introduced by pressing down on the center dial when power is applied to the device.</p>
<p>If you have forgotten the password to the private WiFi network, you will need to load a special firmware to allow you to access the device and reset the password. Though if you have opted to connect your device to a preferred WiFi network using the built-in WiFi settings, simply return to your device's IP address on that network and change the password for the private WiFi network as desired.</p>
<p>In the case where you do not have access to your device via an external WiFi network, you will need to follow a special process using a USB cable and a utility for your OS of choice. This will follow the same process as the "First-Time Upload" instructions posted above, though you will instead load the <a href="binaries/attenuator/Attenuator-ESP32-Reset.bin?raw=1">Attenuator-ESP32-Reset.bin</a> file from the <code>/binaries/attenuator</code> directory.</p>
<p>Once flashed, this will allow you to get back into the web UI at <a href="http://192.168.1.2">http://192.168.1.2</a> or <code>http://protonpack_####.local</code> using the default password ("555-2368") and change to your choice of password. <strong>Once changed, you will need to re-flash the device using the standard firmware--otherwise, the device will always use the default WiFi password while this firmware is loaded</strong>! The new password will be used automatically to secure the WiFi access point once the regular firmware is in use.</p>
<p>📝 <strong>Note:</strong> When using this firmware there will be additional debug messages enabled for the device. Therefore, this firmware image may also be used to help debug WiFi issues by checking the output via the Arduino IDE's serial console. Be sure to set the baud rate to 112500 to view the output correctly.</p>
<hr />
<h2 id="usb-troubleshooting">USB Troubleshooting</h2>
<p>Before beginning any actions when using a USB cable, be sure to use a high-quality USB cable which supports data transfer. Some cheap cables may only support charging (not data), or not fully support the power requirements of the device.</p>
<p><strong>Problem 1:</strong> Your ESP32 controller does not appear as a serial device in your operating system (COM# for Windows, /dev/cu.usb* for macOS/Linux).</p>
<p><strong>Solution 1:</strong> It is necessary to install a driver for the <strong>"CP210x USB to UART Bridge"</strong> onto your computer for some devices. A driver for Windows and macOS is available <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers?tab=downloads">via Silicon Labs</a> and has proved useful.</p>
<p><strong>Problem 2:</strong> The ESP32 device can be detected when using the <a href="https://esp.huhn.me/">ESPWebTool website</a> but can't connect. Alternatively, you get a notice that the device must be reset.</p>
<p><strong>Solution 2:</strong> You must put the device into bootloader mode. To help with this, use the <a href="https://serial.huhn.me/">SerialTerminal website</a> to connect to your device first:</p>
<ol>
<li>Plug ESP32 into computer</li>
<li>Hold down BOOT button</li>
<li>While holding BOOT, click EN once</li>
<li>Continue holding BOOT until the firmware update tool says "Connecting..." then release</li>
</ol>
<p>You should see a message similar to the following which indicates the device is ready to flash:</p>
<pre><code>rst:0x1 (POWERON_RESET),boot:0x3 (DOWNLOAD_BOOT(UART0/UART1/SDIO_REI_REO_V2))
waiting for download
</code></pre>
<p>Without disconnecting the device from your computer, and using the <strong>same</strong> browser tab, return to the ESPWebTool website](https://esp.huhn.me/) and complete the flashing process as described earlier in this guide as "Option 2".</p>
<p><strong>Note:</strong> If you get garbage on the screen when using the serial terminal, use the gear icon at the top right to make sure the baud rate is set to 115200.</p>
<p><strong>Problem 3:</strong> The process described in Solution 2 did not work, help!</p>
<p><strong>Solution 3:</strong> Try using Option 1 instead. For users not on Windows x64 or Mac OSX, use Option 3 to run <code>esptool</code> manually.</p>
<p><strong>Problem 4:</strong> For Linux users, if you get a "Permission denied" error when running <code>esptool</code> you may need to add your user to the dialout group.</p>
<p><strong>Solution 4:</strong> Run this command, then log out and back in for the changes to take effect:</p>
<pre><code>`sudo usermod -aG dialout $USER`
</code></pre>
<p>📝 <strong>Tip:</strong> If you have successfully flashed your ESP32 device and do not see the available WiFi access point, try plugging your USB cable directly into the Talentcell battery or try another USB port on your computer. In rare cases the USB port and/or cable cannot supply enough voltage to run the ESP32's WiFi radio.</p>
<p>📝 <strong>Tip:</strong> To identify the USB device requires different methods based on the operating system used:</p>
<ul>
<li>For <strong>Linux</strong> use the <code>lsusb</code> utility (or <code>lsusb -v</code>) to list attached USB devices.</li>
<li>For <strong>MacOS</strong> run <code>ls /dev/{tty,cu}.*</code> to list available USB devices.</li>
<li>For <strong>Windows</strong>, use the "Device Manager" and look at the <strong>"Ports (COM &amp; LPT)"</strong> section.</li>
</ul>
<p>These guides from Espressif may be of some help as a reference:</p>
<ul>
<li><a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/installation.html#installation">Espressif - esptool Installation</a></li>
<li><a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/esptool/flashing-firmware.html">Espressif - Flashing Firmware</a></li>
<li><a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/advanced-topics/boot-mode-selection.html">Espressif - Boot Mode Selection</a></li>
</ul>
<hr />
<h2 id="software-development-requirements">Software Development Requirements</h2>
<p>As of the v5.4.0 release the development platform of choice for this device has been migrated from Arduino IDE to the <a href="../VSCODE/">VSCode with PlatformIO</a>. Please follow the linked guide for installing the core software and plugins required.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>