
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Pack Attenuator - DIY Guide - GPStar Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pack-attenuator-diy-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GPStar Documentation" class="md-header__button md-logo" aria-label="GPStar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GPStar Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pack Attenuator - DIY Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GPStar Documentation" class="md-nav__button md-logo" aria-label="GPStar Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GPStar Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ABOUT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#printing-a-shell" class="md-nav__link">
    <span class="md-ellipsis">
      Printing a Shell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bill-of-materials" class="md-nav__link">
    <span class="md-ellipsis">
      Bill of Materials
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimensions" class="md-nav__link">
    <span class="md-ellipsis">
      Dimensions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      WiFi Connectivity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esp32-30-pin-reference" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32 - 30-Pin Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esp32-pin-connections" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32 - Pin Connections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ESP32 - Pin Connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connections-by-component" class="md-nav__link">
    <span class="md-ellipsis">
      Connections by Component
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bargraph" class="md-nav__link">
    <span class="md-ellipsis">
      Bargraph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esp32-break-out-board" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32 Break-out Board
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pack-connection-cable" class="md-nav__link">
    <span class="md-ellipsis">
      Pack Connection Cable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-fitment" class="md-nav__link">
    <span class="md-ellipsis">
      Component Fitment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#external-finishing" class="md-nav__link">
    <span class="md-ellipsis">
      External Finishing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="pack-attenuator-diy-guide">Pack Attenuator - DIY Guide</h1>
<p>This guide is intended to document the parts and processes required to build the internals of an Attenuator device for your Proton Pack. <strong>Please note that as of the V6 release of the GPStar software, the only processor option for this device is via an ESP32.</strong></p>
<p><a href="https://www.youtube.com/watch?v=iuZ5ij_PN44">Video Assembly Guide</a> (YouTube, December 2023).
<a href="https://www.youtube.com/watch?v=iuZ5ij_PN44"><img alt="Video Assembly Guide" src="https://img.youtube.com/vi/iuZ5ij_PN44/maxresdefault.jpg" /></a></p>
<h3 id="printing-a-shell">Printing a Shell</h3>
<p>The STL files are available <a href="stl/attenuator">through this repository</a> if you have the capability of printing your own Attenuator shell. Please see the accompanying <a href="stl/attenuator/README-GB_Pack_Attenuator_Shell.pdf">PDF</a> in that directory for more details.</p>
<h2 id="bill-of-materials">Bill of Materials</h2>
<p>This device has it's own BOM which is separate from any other build items related to the pack or wand. This utilizes the same project template for developing software as the other controllers and we'll be using the same type of serial protocol as used between the pack and wand.</p>
<p><strong>Core Electronics</strong></p>
<ul>
<li>Proton Pack Connector: <a href="https://a.co/d/gPiOSzL">4 Pin Aviation Connector</a></li>
<li>Proton Pack Cable: <a href="https://a.co/d/iglELZR">20 AWG 4 Conductor Wire w/ PVC Jacket</a></li>
<li>Cable Covering: <a href="https://a.co/d/cDQPSk0">1/4 Inch Braided PET Wire Loom</a></li>
<li><a href="https://a.co/d/h1Hxh5T">PG7 Rubber Strain Relief Connector</a></li>
<li><a href="https://a.co/d/90SO4AQ">Single-Pixel 5V WS2812B RGB Addressable RGB LEDs</a> (You will use 3 pixels from this set<sup>1</sup>)</li>
<li><a href="https://a.co/d/8SfEpVH">Pre-soldered SPST Mini Toggle Switches</a> or <a href="https://a.co/d/9oIRMAG">Flat Toggles w/o Wires</a></li>
<li><a href="https://a.co/d/3dWJTzi">Rotary Encoder Knob w/ Switch</a></li>
<li><a href="https://a.co/d/8p7mP9x">3V 10mm x 2mm Vibration Motor</a></li>
<li><a href="https://a.co/d/b39ELcm">9mm Passive Piezo Buzzer</a></li>
<li><a href="https://fruttotechnology.com/ols/products/preorder-28-segment-bargraph-pcb-for-spengler-neutrona-wand">28-Segment Bargraph from Frutto Technology</a></li>
<li>2x NPN2222 transistors, 2x 1N4001 diodes, and various resistors (see schematics)</li>
</ul>
<p><sup>1</sup> These <a href="https://a.co/d/2Y9HvIK">pre-soldered LED modules</a> will likely be offered for use in future kits, though in both cases the price point is high considering the need for only 3 LEDs.</p>
<p><strong>Microprocessor Control Unit (MCU)</strong></p>
<p>An ESP32 controller provides the full range of features to integrate with the Proton Pack and Neutrona Wand hardware. Use of an Arduino Nano is no longer supported due to the limitations of that hardware.</p>
<ul>
<li><a href="https://a.co/d/hDxXluE">ESP-WROOM-32 30-pin Dev Board w/ Terminal Shield</a> or <a href="https://a.co/d/62ywBNo">ESP-WROOM-32 Dev Board w/out Headers</a></li>
</ul>
<p><strong>Exterior Decorations</strong></p>
<p>This device was designed to allow for certain "real" parts as opposed to being 100% 3D printed. To finish the look of the exterior the following are <strong>merely suggestions</strong>. These parts may be sourced from any vendor you prefer (in the US most ACE Hardware locations have extensive selections of metrics screws). If a certain item is improbable or unavailable you may substitute as you wish--regardless of material used for printing it should be possible to install a similar sized screw for the provided holes in the shell.</p>
<ul>
<li><a href="https://a.co/d/h5No0N9">M3x4 Button Hex Head Screws</a> (Qty: 14) - Used for decoration on the sides of the body.</li>
<li><a href="https://a.co/d/eUhDiRO">M4x6 Cheese Head Slotted Screws</a> (Qty: 4) - Used for decoration on the top of the body.<ul>
<li>You could also use <a href="https://a.co/d/es5eXBC">8-40 x 1/4" Fillister Head Slotted Screws</a></li>
<li>M4 nuts may be required to secure the screws to the Attenuator shell.</li>
</ul>
</li>
</ul>
<p>The back plate will be attached using either M5 or M4 screws depending on the material used. For screws, your best value is to purchase an assorted set as this cost less than buying a single size of screw.</p>
<ul>
<li><a href="https://a.co/d/0fcUDN5">M4x8 Button Hex Head Screws</a> (Qty: 4) - Used to secure the base plate to metal body.</li>
</ul>
<p>or</p>
<ul>
<li><a href="https://a.co/d/0fcUDN5">M4x8 Button Hex Head Screws</a> (Qty: 4) - Used to secure the base plate to plastic body.</li>
<li><a href="https://a.co/d/dMBuRqA">M4x6 Heat-set Inserts</a> (Qty: 4) - Used to secure the base plate to a plastic body.</li>
</ul>
<p>Device labels can be obtained or created by any means desired. The sizes <a href="https://www.gbfans.com/shop/pack-vinyl-labels/">offered by this product on GBFans</a> should be sufficient.</p>
<ul>
<li>Lower Mode/Indicator: <a href="https://www.digikey.com/en/products/detail/carclo-technical-plastics/10403/2641656">Clear Dome Lens</a> or <a href="https://www.lvelectronics.com/details/item?itemid=CML%2025P-326C#">Fluted Dome Lens</a></li>
<li>Top Mode/Indicator: <a href="https://www.digikey.com/en/products/detail/visual-communications-company-vcc/SML-190-CTP/4515623">Clip-in Lens SML&#95;190&#95;CTP</a></li>
</ul>
<h2 id="dimensions">Dimensions</h2>
<p>It is worth noting that the device is meant to attach to the left shoulder strap of a standard ALICE pack. The width of the strap is typically around 80mm while worn, so this device will fit near perfectly once the strap is pressed against your shoulder/chest. These are the overall dimensions if you wish to approximate the needed space or design your own enclosure. Maintaining these dimensions ensures the components above will fit within the enclosure.</p>
<pre><code>Width: 80mm
Height: 115mm
Depth: 38mm
</code></pre>
<h2 id="wifi-connectivity">WiFi Connectivity</h2>
<p>A primary benefit of using an ESP32 controller it is possible to connect to the device via WiFi. The SSID (Network Name) will be broadcast as <strong>"ProtonPack_####"</strong> where "####" is the last 4 hexadecimal values for the MAC address of the WiFi interface. This will differ for each ESP32 device, making each network unique to the attached pack. The default password is <strong>"555-2368"</strong> and can (and should) be changed via the web interface after successfully connecting to the network. The IP address for the device will be hardcoded as "192.168.1.2" with the web interface accessible at <code>http://192.168.1.2</code> or simply <code>http://ProtonPack_####.local</code>.</p>
<p><strong>Security Notice</strong></p>
<p>Once you have successfully paired with the WiFi network for the Proton pack, you are HIGHLY encouraged to change the default password. This is accessible via a link at the bottom of the main device page as noted above. Follow the prompts to enter and confirm a new password then re-join your pack's WiFi network with the new credentials.</p>
<p>For instructions on using the web interface to control your equipment, please see the <a href="../WIRELESS_OPERATION/">Wireless Operations</a> guide.</p>
<h2 id="esp32-30-pin-reference">ESP32 - 30-Pin Reference</h2>
<p><img alt="" src="../images/ESP32-pinout.png" /></p>
<p>üìù <strong>Note:</strong> There are typically 30-pin and 38-pin versions of the ESP32 development modules and matching terminal shields. Both should work, though there will be some minor differences to the order of pins. ALWAYS match the GPIO pin by label not position or index. This guide uses the more compact 30-pin packaging.</p>
<h2 id="esp32-pin-connections">ESP32 - Pin Connections</h2>
<p>The following is a diagram of the ESP32 pins from left and right, when oriented with the USB connection facing down (south) like the pinout diagram above. This follows the standard pinout for a 30-pin device.</p>
<table>
<thead>
<tr>
<th>Connection</th>
<th>ESP32 (L)</th>
<th></th>
<th>ESP32 (R)</th>
<th>Connection</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>EN</td>
<td></td>
<td>GPIO23</td>
<td>Neopixels (2)</td>
</tr>
<tr>
<td></td>
<td>GPIO36</td>
<td></td>
<td>GPIO22</td>
<td>SCL Bargraph</td>
</tr>
<tr>
<td></td>
<td>GPIO39</td>
<td></td>
<td>GPIO1</td>
<td></td>
</tr>
<tr>
<td>Left Toggle</td>
<td>GPIO34</td>
<td></td>
<td>GPIO3</td>
<td></td>
</tr>
<tr>
<td>Right Toggle</td>
<td>GPIO35</td>
<td></td>
<td>GPIO21</td>
<td>SDA Bargraph</td>
</tr>
<tr>
<td>Encoder A</td>
<td>GPIO32</td>
<td></td>
<td>GPIO19</td>
<td>PN2222</td>
</tr>
<tr>
<td>Encoder B</td>
<td>GPIO33</td>
<td></td>
<td>GPIO18</td>
<td>Piezo Buzzer</td>
</tr>
<tr>
<td></td>
<td>GPIO25</td>
<td></td>
<td>GPIO5</td>
<td></td>
</tr>
<tr>
<td></td>
<td>GPIO26</td>
<td></td>
<td>GPIO17</td>
<td>to Pack RX1</td>
</tr>
<tr>
<td></td>
<td>GPIO27</td>
<td></td>
<td>GPIO16</td>
<td>to Pack TX1</td>
</tr>
<tr>
<td></td>
<td>GPIO14</td>
<td></td>
<td>GPIO4</td>
<td>Encoder Post</td>
</tr>
<tr>
<td></td>
<td>GPIO12</td>
<td></td>
<td>GPIO2</td>
<td></td>
</tr>
<tr>
<td></td>
<td>GPIO13</td>
<td></td>
<td>GPIO15</td>
<td></td>
</tr>
<tr>
<td>Ground (Pack)</td>
<td>GND</td>
<td></td>
<td>GND</td>
<td>Common Ground</td>
</tr>
<tr>
<td>+5V (Pack)</td>
<td>VIN</td>
<td></td>
<td>3.3V</td>
<td>Vib. Motor +</td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>USB</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>When connecting to the pack, the following wiring scheme was used with the recommended 4-pin connector:</p>
<pre><code>1 - GND (Black)
2 - VIN (Red)
3 - TX2 (White) to Pack RX1
4 - RX2 (Yellow) to Pack TX1
</code></pre>
<p>It is advised to add a 330uF capacitor to the VIN+GND pins to help regulate power which will be shared with the controller, bargraph, and addressable LEDs.</p>
<p><strong>Note:</strong> Bargraph power (+5V) should be split from the VIN terminal which delivers power from the Proton Pack.</p>
<h3 id="connections-by-component">Connections by Component</h3>
<p>Wire colors are suggestions, and meant to help differentiate the components. You may use your own scheme as desired. Microcontroller (MCU) pins are labelled using their GPIO# designations. Common pins will retain a singular name.</p>
<p>For the ESP32 controller, GPIO pins 34 and 35 are input-only and do not have internal pull-up resistors. In order to get an accurate reading from the state of the switch it is necessary to add a 3.8k Œ© resistor between the 3.3V (3V3) pin and the respective GPIO pin where the toggle switch connects to the controller. This is essentially a wire from the V+ pin to the noted GPIO pin, with the stated resistor on the wire. Both wires for the pull-up resistor and toggle switch will terminate at the same point on the controller.</p>
<table>
<thead>
<tr>
<th>LEFT TOGGLE</th>
<th></th>
<th></th>
<th>MCU Pin</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="blue">Blue</font></td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GND</td>
<td>Shouldn‚Äôt matter which wire goes where</td>
</tr>
<tr>
<td><font color="blue">Blue</font></td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GPIO34</td>
<td>Shouldn‚Äôt matter which wire goes where</td>
</tr>
<tr>
<td><font color="red">Red</font></td>
<td>‚Üë</td>
<td>3.8K Œ©</td>
<td>3V3</td>
<td>External Pull-up Resistor</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Right TOGGLE</th>
<th></th>
<th></th>
<th>MCU Pin</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="green">Green</font></td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GND</td>
<td>Shouldn‚Äôt matter which wire goes where</td>
</tr>
<tr>
<td><font color="green">Green</font></td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GPIO35</td>
<td>Shouldn‚Äôt matter which wire goes where</td>
</tr>
<tr>
<td><font color="red">Red</font></td>
<td>‚Üë</td>
<td>3.8K Œ©</td>
<td>3V3</td>
<td>External Pull-up Resistor</td>
</tr>
</tbody>
</table>
<p><strong>Rotary Encoder w/ Switch</strong></p>
<p>The rotary encoder is similar to that used on the Proton Pack and Neutrona Wand in that it will rotate without an end-stop, though unlike the other devices this has a center post which acts like a momentary switch. It requires a common ground connection with positive voltage, and sends data via the A/B signal wires to indicate which direction it was turned or the center post was pushed.</p>
<p><strong>Note: This is based on the KY-040 pre-soldered module with 5 pins.</strong></p>
<table>
<thead>
<tr>
<th>ROTARY ENCODER (DIAL)</th>
<th></th>
<th>MCU Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>GND</td>
<td>‚Üí</td>
<td>GND</td>
</tr>
<tr>
<td><font color="red">+ (VCC)</font></td>
<td>‚Üí</td>
<td>VIN (5V)</td>
</tr>
<tr>
<td><font color="green">SW</font></td>
<td>‚Üí</td>
<td>D4/GPIO4</td>
</tr>
<tr>
<td><font color="blue">DT (B)</font></td>
<td>‚Üí</td>
<td>D2/GPIO33</td>
</tr>
<tr>
<td><font color="blue">CLK (A)</font></td>
<td>‚Üí</td>
<td>D3/GPIO32</td>
</tr>
</tbody>
</table>
<p><strong>Addressable LEDs</strong></p>
<table>
<thead>
<tr>
<th>LED'S</th>
<th></th>
<th>Component</th>
<th>MCU Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="red">Red</font></td>
<td>‚Üí</td>
<td>100uf</td>
<td>5V/VIN</td>
</tr>
<tr>
<td><font color="green">Green</font></td>
<td>‚Üí</td>
<td>470 Œ©</td>
<td>D9/GPIO23</td>
</tr>
<tr>
<td><font color="gray">Black</font></td>
<td>‚Üí</td>
<td>100uf</td>
<td>GND</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> It is advised to place a 100uf capacitor across the positive and negative connections to these devices, just to buffer any current fluctuations.</p>
<p>Addressable LEDs have a distinct data flow with solder pads labelled <code>DIN</code> and <code>DOUT</code>. It is crucial to chain these devices starting from the Arduino to an LEDs <code>DIN</code> pad first, then the same device's <code>DOUT</code> pad to the next LED's <code>DIN</code> pad, and so on.</p>
<p><strong>Audio &amp; Physical Feedback</strong></p>
<table>
<thead>
<tr>
<th>PIEZO BUZZER</th>
<th>Component(s)</th>
<th>MCU Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="red">Red</font></td>
<td>‚Üí</td>
<td>VIN/5V</td>
</tr>
<tr>
<td>Black</td>
<td>NPN C</td>
<td></td>
</tr>
<tr>
<td></td>
<td>NPN B</td>
<td>R 270 Œ© ‚Üí D10/GPIO18</td>
</tr>
<tr>
<td></td>
<td>NPN E</td>
<td>GND</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>VIBRATION MOTOR</th>
<th>Component(s)</th>
<th>Component(s)</th>
<th>MCU Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="red">Red</font></td>
<td>1N4001 (s)</td>
<td>‚Üí</td>
<td>3V3/3.3V</td>
</tr>
<tr>
<td><font color="blue">Blue</font></td>
<td>1N4001</td>
<td>NPN C</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>NPN B</td>
<td>R 270 Œ© ‚Üí D11/GPIO19</td>
</tr>
<tr>
<td></td>
<td></td>
<td>NPN E</td>
<td>GND</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The vibration motor (60mA) requires use of a transistor as the higher current draw exceeds the maximum 40mA recommended for the microcontroller's pin. To safely deliver power we will use an 2N2222/2N5551, an NPN Bipolar Transistor (BJT). A diode is recommended as this is a motor and thus could cause a small induction current in reverse when power is removed.</p>
<p><img alt="" src="../images/VibrationMotor.jpg" /></p>
<h2 id="bargraph">Bargraph</h2>
<p>This is a separate but critical device and should be a relatively easy connection when using the Frutto Technology packaging which has only 2 ports: 5V/GND and SDA/SCL. Power will be connected to the "5V" on the Arduino and a common ground (GND). These are GPIO pins 21 and 22 for SDA and SCL, respectively.</p>
<p><strong>Note:</strong> For the ESP32 controller, GPIO pins 21 (SDA) and 22 (SCL) do not have internal pull-up resistors. In order to detect attached devices it is necessary to add a 3.8k Œ© resistor between the 3.3V (3V3) pin and the respective GPIO pin where the bargraph connects to the controller. This is essentially a wire from the V+ pin to the noted GPIO pin, with the stated resistor on the wire. Both wires for the pull-up resistor and data line will terminate at the same point on the controller.</p>
<table>
<thead>
<tr>
<th>Bargraph</th>
<th></th>
<th></th>
<th></th>
<th>MCU Pin</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="red">Red</font></td>
<td></td>
<td>‚Üì</td>
<td>3.8K Œ©</td>
<td>3V3</td>
<td>External Pull-up Resistor</td>
</tr>
<tr>
<td><font color="gray">White</font></td>
<td>SDA</td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GPIO21</td>
<td>Check wire labels on bargraph</td>
</tr>
<tr>
<td><font color="gray">White</font></td>
<td>SCL</td>
<td>‚Üí</td>
<td>‚Üí</td>
<td>GPIO22</td>
<td>Check wire labels on bargraph</td>
</tr>
<tr>
<td><font color="red">Red</font></td>
<td></td>
<td>‚Üë</td>
<td>3.8K Œ©</td>
<td>3V3</td>
<td>External Pull-up Resistor</td>
</tr>
</tbody>
</table>
<h2 id="esp32-break-out-board">ESP32 Break-out Board</h2>
<p>To simplify installation it is suggested to create a break-out board for connections when using the ESP32 microcontroller. This is due to the need for pull-up resistors on select pins and can be accomplished by using a solderable ¬Ω size protoboard.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>A</strong></th>
<th><strong>B</strong></th>
<th><strong>C</strong></th>
<th><strong>D</strong></th>
<th><strong>E</strong></th>
<th></th>
<th><strong>F</strong></th>
<th><strong>G</strong></th>
<th><strong>H</strong></th>
<th><strong>I</strong></th>
<th><strong>J</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1</strong></td>
<td><font color="green">GPIO23</font></td>
<td></td>
<td></td>
<td>R 470 Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R 470 Œ©</td>
<td></td>
<td></td>
<td>Addressable&nbsp;LEDs</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><font color="red">3V3</font></td>
<td><font color="red">Z+</font></td>
<td></td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td></td>
<td><font color="blue">GPIO21</font></td>
<td>Bargraph&nbsp;SDA (JST&dash;PH)</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td></td>
<td><font color="red">Z+</font></td>
<td><font color="red">Y+</font></td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td></td>
<td><font color="green">GPIO22</font></td>
<td>Bargraph&nbsp;SCL (JST&dash;PH)</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><font color="red">V+</font></td>
<td><font color="red">X+</font></td>
<td><font color="red">Y+</font></td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td></td>
<td><font color="blue">GPIO34</font></td>
<td><font color="blue">Left Toggle</font></td>
</tr>
<tr>
<td><strong>5</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>V-</td>
<td></td>
<td></td>
<td>Left Toggle (-)</td>
</tr>
<tr>
<td><strong>6</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>W-</td>
<td>V-</td>
<td></td>
<td></td>
<td>Right Toggle (-)</td>
</tr>
<tr>
<td><strong>7</strong></td>
<td></td>
<td><font color="red">X+</font></td>
<td><font color="red">W+</font></td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R&nbsp;3.8K&nbsp;Œ©</td>
<td></td>
<td><font color="green">GPIO35</font></td>
<td><font color="green">Right Toggle</font></td>
</tr>
<tr>
<td><strong>8</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>9</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><font color="red">V+</font></td>
<td>NPN&nbsp;C</td>
<td></td>
<td><font color="red">Buzzer&nbsp;(+)</font></td>
</tr>
<tr>
<td><strong>10</strong></td>
<td><font color="green">GPIO18</font></td>
<td></td>
<td></td>
<td>R 270 Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R 270 Œ©</td>
<td>NPN&nbsp;B</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>11</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X-</td>
<td>NPN&nbsp;E</td>
<td></td>
<td>Buzzer&nbsp;(&dash;)</td>
</tr>
<tr>
<td><strong>12</strong></td>
<td></td>
<td>Z-</td>
<td></td>
<td>Rot.&nbsp;Enc.&nbsp;(GND)</td>
<td></td>
<td></td>
<td></td>
<td><font color="red">W+</font></td>
<td></td>
<td>1N4001 (s)</td>
<td><font color="red">Vib. Motor (+)</font></td>
</tr>
<tr>
<td><strong>13</strong></td>
<td>GND (-)</td>
<td>Z-</td>
<td>Y-</td>
<td>X-</td>
<td>W-</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>‚Üï</td>
<td></td>
</tr>
<tr>
<td><strong>14</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>‚Üï</td>
<td></td>
</tr>
<tr>
<td><strong>15</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>NPN&nbsp;C</td>
<td>1N4001</td>
<td><font color="blue">Vib. Motor (-)</font></td>
</tr>
<tr>
<td><strong>16</strong></td>
<td><font color="green">GPIO19</font></td>
<td></td>
<td></td>
<td>R 270 Œ©</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>‚Üî</td>
<td>R 270 Œ©</td>
<td>NPN&nbsp;B</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>17</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y-</td>
<td>NPN&nbsp;E</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="pack-connection-cable">Pack Connection Cable</h2>
<p>In order to connect to the pack you will need to create a custom cable for the device. This will consist of running the 4-conductor jacketed wire through the braided wire loom, and terminating with the 4-pin connector at one end and passing through the strain relief at the other end. The bare wires can be soldered directly to the microcontroller or use a terminal shield.</p>
<p>Where the socket for this connection cable is mounted on the pack is up to you--this device is meant to integrate how you think it should. You will be able to use 2 existing JST-XH connections on the gpstar Pack PCB controller: 5V-OUT and TX1/RX1. Please refer to the wiring notes above for how to make this connections. Just remember that TX/RX from the Attenuator will go to RX/TX on the pack (read: the wires flip).</p>
<p>Please see the notes above for the correct pin names for connections based on your choice of microcontroller.</p>
<h2 id="component-fitment">Component Fitment</h2>
<p>The dimensions of the project housing allows for easy access into all areas of the device. It should be no problem to fit the available components within the final device. Note that you will want to build the connection cable in full and run it through the strain relief before attached to the device housing.</p>
<p>For assembly, the shell contains 4 holes meant to take heat-set inserts which provide metal-threaded junctions for screws to hold on the bottom plate. Because the plat must then be attached to the ALICE pack strap these should be secure but removable in the case of re-flashing software updates to the device.</p>
<h2 id="external-finishing">External Finishing</h2>
<p>View <a href="../ATTENUATOR_FINISHING/">the guide here</a> for parts and materials for finishing the exterior of your device.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>