<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href=../img/favicon.ico><title>Web API Reference - GPStar Documentation</title><link rel=stylesheet href=../css/theme.css><link rel=stylesheet href=../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../css/custom.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "Web API Reference";
        var mkdocs_page_input_path = "WEB_API_REFERENCE.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=..> <img src=../images/gpstar_logo_white.png class=logo alt=Logo> </a> <div class=version> 6.x </div><div role=search> <form id=rtd-search-form class=wy-form action=../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=..>Home</a> </li> </ul> <ul> <li class=toctree-l1><a href=../ABOUT/ class="reference internal">About</a> </li> </ul> <ul> <li class=toctree-l1><a href=../GUIDE_LISTING/ class="reference internal">Introduction</a> </li> </ul> <p class=caption><span class=caption-text>GPStar II</span></p> <ul> <li class=toctree-l1><a href=../PACK_2_PCB/ class="reference internal">Proton Pack II</a> </li> <li class=toctree-l1><a href=../WAND_2_PCB/ class="reference internal">Neutrona Wand II</a> </li> <li class=toctree-l1><a href=../WAND_CALIBRATION/ class="reference internal">Sensor Calibration</a> </li> <li class=toctree-l1><a href=../WIRELESS_GPSTAR_II/ class="reference internal">GPStar II Wireless</a> </li> </ul> <p class=caption><span class=caption-text>GPStar</span></p> <ul> <li class=toctree-l1><a href=../PACK_PCB/ class="reference internal">Proton Pack</a> </li> <li class=toctree-l1><a href=../WAND_PCB/ class="reference internal">Neutrona Wand</a> </li> </ul> <ul> <li class=toctree-l1><a href=../GPSTAR_AUDIO_PCB/ class="reference internal">GPStar Audio</a> </li> </ul> <p class=caption><span class=caption-text>Additional Components</span></p> <ul> <li class=toctree-l1><a class="reference internal">Proton Pack</a> <ul> <li class=toctree-l2><a href=../CYCLOTRON_LID/ class="reference internal">Cyclotron Lid</a> </li> <li class=toctree-l2><a href=../CYCLOTRON_INNER/ class="reference internal">Inner Cyclotron</a> </li> <li class=toctree-l2><a href=../CYCLOTRON_BYPASS/ class="reference internal">Cyclotron Bypass</a> </li> <li class=toctree-l2><a href=../NFILTER/ class="reference internal">N-Filter</a> </li> <li class=toctree-l2><a href=../POWERCELL/ class="reference internal">Power Cell</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Neutrona Wand</a> <ul> <li class=toctree-l2><a href=../BARGRAPH/ class="reference internal">Bargraph</a> </li> <li class=toctree-l2><a href=../HATS/ class="reference internal">Hatlights</a> </li> <li class=toctree-l2><a href=../VENTLIGHT/ class="reference internal">Vent Lights</a> </li> <li class=toctree-l2><a href=../NEUTRONA_ENCODER/ class="reference internal">Neutrona Encoder</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Pack Attenuator</a> <ul> <li class=toctree-l2><a href=../ATTENUATOR/ class="reference internal">Attenuator</a> </li> <li class=toctree-l2><a href=../WIRELESS/ class="reference internal">WiFi Adapter</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Special Guides</span></p> <ul class=current> <li class=toctree-l1><a href=../POWER/ class="reference internal">Power Requirements</a> </li> <li class=toctree-l1><a href=../SOUND/ class="reference internal">Sound Output</a> </li> <li class=toctree-l1><a href=../HOSE/ class="reference internal">Pack-Wand Hose</a> </li> <li class=toctree-l1><a href=../SMOKE/ class="reference internal">Smoke Kits</a> </li> <li class="toctree-l1 current"><a class="reference internal current" href=#>Web API Reference</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#background>Background</a> </li> <li class=toctree-l2><a class="reference internal" href=#file-requests>File Requests</a> </li> <li class=toctree-l2><a class="reference internal" href=#api-reference>API Reference</a> </li> <li class=toctree-l2><a class="reference internal" href=#websockets>WebSockets</a> </li> </ul> </li> <li class=toctree-l1><a href=../DIY_LEGACY/ class="reference internal">Legacy DIY</a> </li> </ul> <p class=caption><span class=caption-text>Install Videos</span></p> <ul> <li class=toctree-l1><a href=../INSTALL_VIDEOS_JONOGUNN/ class="reference internal">Jonogunn</a> </li> <li class=toctree-l1><a href=../INSTALL_VIDEOS_NORCALGB/ class="reference internal">Nor-Cal GB</a> </li> </ul> <p class=caption><span class=caption-text>Maintenance</span></p> <ul> <li class=toctree-l1><a href=../FLASHING/ class="reference internal">Flashing Pack/Wand Firmware</a> </li> <li class=toctree-l1><a href=../ATTENUATOR_FLASHING/ class="reference internal">Flashing Attenuator/WiFi</a> </li> <li class=toctree-l1><a href=../AUDIO_FILES/ class="reference internal">Audio Files</a> </li> </ul> <p class=caption><span class=caption-text>Operation Manuals</span></p> <ul> <li class=toctree-l1><a href=../OPERATION_USAGE/ class="reference internal">General Usage</a> </li> <li class=toctree-l1><a href=../OPERATION_MENUS/ class="reference internal">Runtime Menus</a> </li> <li class=toctree-l1><a href=../OPERATION_EEPROM/ class="reference internal">EEPROM Menus</a> </li> <li class=toctree-l1><a href=../WIRELESS_OPERATION/ class="reference internal">Attenuator WiFi Operation</a> </li> </ul> <p class=caption><span class=caption-text>From the Engineer Corps</span></p> <ul> <li class=toctree-l1><a href=../SINGLESHOT/ class="reference internal">Single-Shot Blaster</a> </li> <li class=toctree-l1><a href=../BELT_GIZMO/ class="reference internal">Belt Gizmo</a> </li> <li class=toctree-l1><a href=../STREAM_EFFECTS/ class="reference internal">Stream Effects</a> </li> </ul> <p class=caption><span class=caption-text>Help</span></p> <ul> <li class=toctree-l1><a href=../TROUBLESHOOTING/ class="reference internal">Troubleshooting</a> </li> <li class=toctree-l1><a href=../FAQ/ class="reference internal">General FAQ</a> </li> <li class=toctree-l1><a href=../FAQ_GPStar2/ class="reference internal">GPStar II FAQ</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=..>GPStar Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Special Guides</li> <li class="breadcrumb-item active">Web API Reference</li> <li class=wy-breadcrumbs-aside> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=web-based-api-reference>Web-Based API Reference</h1> <p>This guide will cover the web interface available via an Attenuator or standalone WiFi add-on which offers a visual, web-based UI capable of controlling operations of your Proton Pack and Neutrona Wand.</p> <p>While this guide is primarily targeted to the UI from an <strong>Attenuator</strong> (or standalone WiFi add-on). For use of the GPStar Proton Pack II and GPStar Neutrona Wand II controllers you should view the dedicated <a href=../WIRELESS_GPSTAR_II/ >GPStar II Wireless Guide</a>.</p> <h2 id=background>Background</h2> <p>The web UI is built as a single-page application, using single HTML pages for the static interface elements and performing actions using an API layer. These API endpoints are available for use if you wish to build your own interface. They pass data in JSON format though the exact structure is not described here at this time.</p> <h2 id=file-requests>File Requests</h2> <p>The following URI's will serve the informational/maintenance pages as shown in the wireless operation guides. These are listed for you to observe how the API's may be called and how data is used for changing states within the UI:</p> <pre><code>GET / - Standard Index/Landing Page
GET /network - External WiFi Settings Page
GET /password - WiFi Password Update Page
GET /settings/device = Special Device Settings Page
GET /settings/pack - Pack Settings Page
GET /settings/wand - Wand Settings Page
GET /settings/smoke - Smoke Settings Page
GET /style.css - Common Stylesheet
GET /common.js - Common JavaScript
GET /index.js - Index Page JavaScript
</code></pre> <h2 id=api-reference>API Reference</h2> <p>The following URI's are API endpoints available for managing actions within your devices. You may use these to create your own UI or control your available hardware devices. For instance, you can monitor the <code>/status</code> endpoint for changes, or use the volume/music endpoints to create your own jukebox interface. All data should use the <code>application/json</code> content type for sending or receiving of data. Where applicable for body data to be sent to the device a footnote describes where to find a sample of the JSON payload.</p> <pre><code>GET /status - Obtain all current equipment status (pack + wand)
DELETE /restart - Perform a software restart of the Attenuator or Wireless controller
</code></pre> <p>Available for only the Attenuator and GPStar Proton Pack II:</p> <pre><code>PUT /pack/on - Turn the pack on (subject to system state)
PUT /pack/off - Turn the pack onf (subject to system state)
PUT /pack/attenuate - Cancel pack overheat via "attenuation"
PUT /pack/vent - Perform manual vent (subject to system state)
PUT /pack/cyclotron/clockwise - Spin cyclotron clockwise
PUT /pack/cyclotron/counterclockwise - Spin cyclotron counterclockwise
PUT /pack/smoke/on - Enable smoke
PUT /pack/smoke/off - Disable smoke
PUT /pack/stream/proton - Switch to Proton Stream
PUT /pack/stream/stasis - Switch to Dark Matter Generator
PUT /pack/stream/slime - Switch to Plasm System
PUT /pack/stream/meson - Switch to Particle System
PUT /pack/stream/spectral - Switch to Spectral Proton Stream
PUT /pack/stream/holiday_halloween - Switch to Halloween Proton Stream
PUT /pack/stream/holiday_christmas - Switch to Christmas Proton Stream
PUT /pack/stream/spectral_custom - Switch to Custom Proton Stream
PUT /pack/theme/1984 - Switch to GB1 theme
PUT /pack/theme/1989 - Switch to GB2 theme
PUT /pack/theme/2021 - Switch to GB:AL theme
PUT /pack/theme/2024 - Switch to GB:FE theme
PUT /pack/vibration/on - Enable vibration
PUT /pack/vibration/off - Disable vibration
</code></pre> <p>Available only to the GPStar Neutrona Wand II:</p> <pre><code>PUT /sensors/recenter - Re-orient using the current position
PUT /sensors/calibrate/enable - Start the magnetic calibration process
PUT /sensors/calibrate/disable - Finish the magnetic calibration process
PUT /infrared/signal?type=[STRING] - Send an IR signal (Default: ghostintrap)
</code></pre> <p>Common audio controls:</p> <pre><code>PUT /volume/mute - Mute all effects and music
PUT /volume/unmute - Unmute all effects and music
PUT /volume/master/up - Increase master (overall) volume
PUT /volume/master/down - Decrease master (overall) volume
PUT /volume/effects/up - Increase effects volume
PUT /volume/effects/down - Decrease effects volume
PUT /volume/music/up - Increase music volume
PUT /volume/music/down - Decrease music volume

PUT /music/startstop - Toggle music playback via start/stop
PUT /music/pauseresume - Toggle music playback via resume/pause
PUT /music/next - Move to next track
PUT /music/prev - Move to previous track
PUT /music/loop/all - Set looping at end of playlist
PUT /music/loop/single - Set looping of a single track
PUT /music/select?track=[INTEGER] - Select a specific music track (Min Value: 500)
</code></pre> <p>Settings for devices as accessible by [A]ttenuator, [P]ack, or [ALL]:</p> <pre><code>GET /wifi/settings - Returns the current external WiFi settings [ALL]
PUT /wifi/update - Save new/modified external WiFi settings [ALL]
    Body: Send same JSON body as returned by 'GET /wifi/settings'

GET /config/device - Returns the current special device settings [ALL]
PUT /config/device/save - Saves special device settings [ALL]
    Body: Send same JSON body as returned by 'GET /config/device'

GET /config/pack - Returns the current pack equipment settings [A,P]
PUT /config/pack/save - Saves pack settings for evaluation [A,P]
    Body: Send same JSON body as returned by 'GET /config/pack'

GET /config/wand - Returns the current wand equipment settings [ALL]
PUT /config/wand/save - Saves wand settings for evaluation [ALL]
    Body: Send same JSON body as returned by 'GET /config/wand'

GET /config/smoke - Returns the current pack/wand smoke settings [A,P]
PUT /config/smoke/save - Saves smoke settings for evaluation [A,P]
    Body: Send same JSON body as returned by 'GET /config/smoke'
</code></pre> <p>WARNING: Only call these API's as necessary as these cause write cycles to the EEPROM!</p> <pre><code>PUT /eeprom/all - Stores all current preferences to pack/wand EEPROMs (eg. smoke settings) [A,P]
PUT /eeprom/pack - Stores current pack preferences to pack EEPROM only [A,P]
PUT /eeprom/wand - Stores current wand preferences to wand EEPROM only [ALL]
</code></pre> <h2 id=websockets>WebSockets</h2> <p>All of the API endpoints previously highlighted work on a "poll" or "pull" mechanism. This means that in order to get information from endpoints such as <code>/status</code> you would need to constantly make a request at regular intervals to obtain data. This is inefficient and can put unnecessary load on the device when no interactions have occurred.</p> <p>Instead, when real-time updates are required we can instead have the devices "push" information as it happens directly from user input or other events. The built-in web server offers a special URI endpoint <code>/ws</code> to support <a href=https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API>WebSockets</a>. This is much more efficient as it 1) only sends data as the system changes states, and 2) is meant to report only the information necessary for interactions.</p> <p>All devices support the WebSocket output, which primarily reports the current device status and is updated after specific system actions occur. Note that while this data will always be in the form of a JSON object, some events may send a plain string, so always check the contents of the text data carefully before usage to ensure you are working with the expected data format.</p> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=../SMOKE/ class="btn btn-neutral float-left" title="Smoke Kits"><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../DIY_LEGACY/ class="btn btn-neutral float-right" title="Legacy DIY">Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> <p>GPStar Technologies</p> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span><a href=../SMOKE/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../DIY_LEGACY/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../js/jquery-3.6.0.min.js></script> <script>var base_url = "..";</script> <script src=../js/theme_extra.js></script> <script src=../js/theme.js></script> <script src=../search/main.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 