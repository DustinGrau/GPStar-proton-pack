Magnetometer Calibration Analysis Tool
Purpose: Analyze prototype vs production binning behavior
=========================================

=== ANALYSIS CONFIGURATION ===
Bin Size: 9° per bin
Grid Dimensions: 40 azimuth bins × 20 elevation bins
Total Bins Available: 800 bins
Azimuth Range: 0° to 360° (coverage: 40 bins)
Elevation Range: -90° to +90° (coverage: 20 bins)
Coverage Resolution: Each bin represents 9° × 9° area
Elevation Compensation: DISABLED

Loading log files...
Loaded 3741 readings from movement/prototype_last3.log
Loaded 3597 readings from movement/production40_last3.log

Processing PROTOTYPE dataset...
Analysis complete: 3741 valid samples, 494 unique bins (61.8% coverage)

Processing PRODUCTION dataset...
Analysis complete: 3597 valid samples, 339 unique bins (42.4% coverage)

=== DETAILED ANALYSIS: PROTOTYPE ===
Source File: movement/prototype_last3.log
  Detailed breakdown written to: movement/prototype_last3_analysis.txt

Sample Statistics:
  Total Lines: 3741
  Valid Samples: 3741
  Accepted Samples: 494
  Unique Bins: 494 / 800
  Coverage: 61.75%
  Processing Efficiency: 100.0% valid samples

Magnitude Analysis:
  Average: 48.97 µT
  Range: 6.74 to 84.09 µT
  Spread: 77.35 µT

Angular Analysis:
  Azimuth - Avg: 59.8°, Range: -179.9° to 179.9°
  Elevation - Avg: -6.7°, Range: -83.8° to 86.4°

Elevation Bin Distribution:
  Bin  0 ( -90.0°):    8 samples
  Bin  1 ( -81.0°):   55 samples
  Bin  2 ( -72.0°):  218 samples
  Bin  3 ( -63.0°):  151 samples
  Bin  4 ( -54.0°):  252 samples
  Bin  5 ( -45.0°):  287 samples
  Bin  6 ( -36.0°):  295 samples
  Bin  7 ( -27.0°):  259 samples
  Bin  8 ( -18.0°):  355 samples
  Bin  9 (  -9.0°):  231 samples
  Bin 10 (   0.0°):  261 samples
  Bin 11 (   9.0°):  270 samples
  Bin 12 (  18.0°):  273 samples
  Bin 13 (  27.0°):  347 samples
  Bin 14 (  36.0°):  154 samples
  Bin 15 (  45.0°):   89 samples
  Bin 16 (  54.0°):  133 samples
  Bin 17 (  63.0°):   69 samples
  Bin 18 (  72.0°):   29 samples
  Bin 19 (  81.0°):    5 samples

Active Azimuth Bins: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
                     15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 
                     30 31 32 33 34 35 36 37 38 39 

Acceptance Summary:
  Accepted: 494 / 3741 (13.2%)

=== DETAILED ANALYSIS: PRODUCTION ===
Source File: movement/production40_last3.log
  Detailed breakdown written to: movement/production40_last3_analysis.txt

Sample Statistics:
  Total Lines: 3597
  Valid Samples: 3597
  Accepted Samples: 339
  Unique Bins: 339 / 800
  Coverage: 42.38%
  Processing Efficiency: 100.0% valid samples

Magnitude Analysis:
  Average: 58.33 µT
  Range: 1.66 to 92.82 µT
  Spread: 91.16 µT

Angular Analysis:
  Azimuth - Avg: 79.5°, Range: -179.9° to 179.9°
  Elevation - Avg: -25.9°, Range: -89.8° to 42.4°

Elevation Bin Distribution:
  Bin  0 ( -90.0°):   51 samples
  Bin  1 ( -81.0°):  137 samples
  Bin  2 ( -72.0°):  233 samples
  Bin  3 ( -63.0°):  329 samples
  Bin  4 ( -54.0°):  377 samples
  Bin  5 ( -45.0°):  289 samples
  Bin  6 ( -36.0°):  266 samples
  Bin  7 ( -27.0°):  244 samples
  Bin  8 ( -18.0°):  420 samples
  Bin  9 (  -9.0°):  545 samples
  Bin 10 (   0.0°):  340 samples
  Bin 11 (   9.0°):  212 samples
  Bin 12 (  18.0°):   88 samples
  Bin 13 (  27.0°):   54 samples
  Bin 14 (  36.0°):   12 samples

Active Azimuth Bins: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
                     15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 
                     30 31 32 33 34 35 36 37 38 39 

Acceptance Summary:
  Accepted: 339 / 3597 (9.4%)

=== COMPARATIVE ANALYSIS ===
Metric                    | Prototype       | Production      | Ratio (P/Pr)
----------------------------------------------------------------------
Valid Samples             | 3741            | 3597            | 0.96        
Unique Bins               | 494             | 339             | 0.69        
Coverage %                | 61.8            | 42.4            | 0.69        
Avg Magnitude (µT)       | 49.0            | 58.3            | 1.19        
Avg Elevation (°)        | -6.75           | -25.92          | 3.84        
Avg Azimuth (°)          | 59.82           | 79.51           | 1.33        

=== KEY FINDINGS ===
1. Magnitude Difference: Production readings are 1.2x stronger
2. Coverage Difference: Production achieves 0.7x the coverage
3. Elevation Shift: Production reads -19.2° different elevation
   -> SIGNIFICANT: Large elevation bias detected
4. Bin Overlap: 46.4% of bins are shared between datasets
   -> CRITICAL: Low bin overlap suggests systematic bias

Analysis complete!
